# GitHub Copilot Prompts for Citizen Developers

This guide provides sample prompts you can use with GitHub Copilot to generate new Azure Functions and extend functionality.

## üéØ How to Use Copilot

1. Open `src/funcapp/function_app.py` in your editor
2. Place your cursor where you want to add new code
3. Type a comment with your prompt starting with `#`
4. Press Enter and let Copilot suggest code
5. Accept suggestions with Tab or generate alternatives with Alt+]

## üìù Sample Prompts for HTTP Triggers

### Basic HTTP Trigger

**Prompt:**
```python
# Create an HTTP trigger function named "hello_world" that accepts GET and POST requests
# Returns a JSON response with a greeting message and current timestamp
```

**Expected Output:**
```python
@app.route(route="hello_world", methods=["GET", "POST"])
def hello_world(req: func.HttpRequest) -> func.HttpResponse:
    # Generated by Copilot
```

### Data Validation Function

**Prompt:**
```python
# Create an HTTP trigger function named "validate_email" that:
# 1. Accepts POST requests with JSON body containing "email" field
# 2. Validates email format using regex
# 3. Returns JSON with validation result and error message if invalid
```

### CSV Processing Function

**Prompt:**
```python
# Create an HTTP trigger function named "analyze_sales" that:
# 1. Accepts POST request with CSV data containing: date, product, quantity, price
# 2. Calculates total revenue (quantity * price) for each row
# 3. Groups by product and returns total revenue per product
# 4. Includes error handling for invalid CSV format
```

### JSON Data Transformation

**Prompt:**
```python
# Create an HTTP trigger function named "transform_data" that:
# 1. Accepts POST request with JSON array of objects
# 2. Each object has: id, firstName, lastName, age
# 3. Transforms to: id, fullName (combined), ageGroup (child/adult/senior)
# 4. Returns transformed JSON array
```

## üîß Sample Prompts for Business Logic

### Financial Calculations

**Prompt:**
```python
# Create an HTTP trigger function named "calculate_discount" that:
# 1. Accepts JSON with: originalPrice, discountPercent, taxRate
# 2. Calculates discounted price
# 3. Applies tax to discounted price
# 4. Returns JSON with breakdown: original, discount, subtotal, tax, final
# 5. Validates all inputs are positive numbers
```

### Data Aggregation

**Prompt:**
```python
# Create an HTTP trigger function named "aggregate_metrics" that:
# 1. Accepts POST with CSV containing: department, employee, hours, billableRate
# 2. Calculates total revenue per department (hours * billableRate)
# 3. Finds average hours per employee
# 4. Returns JSON with department summaries and overall totals
```

### Date/Time Processing

**Prompt:**
```python
# Create an HTTP trigger function named "business_days" that:
# 1. Accepts GET with query params: startDate, endDate (YYYY-MM-DD format)
# 2. Calculates number of business days between dates (excluding weekends)
# 3. Optionally accepts holidays as comma-separated dates to exclude
# 4. Returns JSON with: businessDays, weekends, holidays, totalDays
```

## üé® Prompts for Error Handling

**Prompt:**
```python
# Add comprehensive error handling to this function that:
# 1. Catches ValueError for invalid data types
# 2. Catches KeyError for missing required fields
# 3. Catches general exceptions
# 4. Logs errors with appropriate severity
# 5. Returns user-friendly error messages in JSON format
```

## üîç Prompts for Data Validation

**Prompt:**
```python
# Create a helper function named "validate_csv_structure" that:
# 1. Takes CSV string as input
# 2. Checks if CSV is not empty
# 3. Validates required columns exist
# 4. Verifies data types for each column
# 5. Returns tuple: (is_valid: bool, error_message: str)
```

## üìä Advanced Prompts

### Complex CSV Processing

**Prompt:**
```python
# Create an HTTP trigger function named "process_inventory" for Flynn's inventory management:
# 1. Accepts POST with CSV: productId, productName, quantity, location, lastUpdated
# 2. Validates all required fields are present
# 3. Filters out items with quantity = 0
# 4. Groups by location
# 5. For each location, calculates:
#    - Total items
#    - Total quantity
#    - Items needing restock (quantity < 10)
# 6. Returns JSON with location summaries and restock alerts
# 7. Includes comprehensive error handling and logging
```

### API Integration

**Prompt:**
```python
# Create an HTTP trigger function named "enrich_customer_data" that:
# 1. Accepts POST with JSON array of customer objects (id, email, company)
# 2. For each customer, validates email format
# 3. Adds enrichment fields: domain (from email), timestamp, status
# 4. Returns enriched JSON array
# 5. Handles cases where email is invalid
# 6. Logs processing statistics
```

### Multi-step Processing

**Prompt:**
```python
# Create an HTTP trigger function named "order_processor" that:
# 1. Accepts POST with order JSON: orderId, items[], customerId, shippingAddress
# 2. Validates order structure and required fields
# 3. Calculates subtotal from items (price * quantity)
# 4. Applies shipping cost based on total weight
# 5. Calculates tax based on shipping state
# 6. Generates order summary with all calculations
# 7. Returns JSON with: orderId, subtotal, shipping, tax, total, status
# 8. Includes detailed logging for each step
```

## üß™ Prompts for Testing

**Prompt:**
```python
# Create a test data generator function that:
# 1. Generates sample CSV data for testing
# 2. Accepts parameters: num_rows, include_invalid_data
# 3. Returns CSV string with realistic test data
# 4. Useful for testing the process_csv function
```

## üí° Tips for Writing Effective Prompts

1. **Be Specific**: Include exact field names, data types, and expected output format
2. **Number Steps**: Break complex logic into numbered steps
3. **Include Context**: Mention the use case (e.g., "for Flynn's sales analysis")
4. **Specify Error Handling**: Always mention how to handle errors
5. **Request Logging**: Ask for appropriate logging statements
6. **Define Validation**: Specify what inputs need validation
7. **Example Data**: Provide sample input/output when helpful

## üîó Iterating with Copilot

If the first suggestion isn't perfect:

1. **Refine the prompt**: Add more details or constraints
2. **Ask for alternatives**: Use Alt+] to cycle through suggestions
3. **Chain prompts**: Start with basic structure, then add details
4. **Request modifications**: "Add error handling to the above function"

## üìö Example Workflow

1. Start with a basic prompt for the function structure
2. Accept the suggestion
3. Add a prompt for error handling
4. Add a prompt for logging
5. Add a prompt for input validation
6. Test locally with `func start`
7. Refine based on test results

## üéì Real-World Example: Flynn's CSV Processor

**Scenario**: Flynn needs to process monthly sales reports uploaded as CSV files.

**Step 1 - Basic Structure:**
```python
# Create an HTTP trigger function named "monthly_sales_report" that accepts CSV via POST
```

**Step 2 - Add Processing Logic:**
```python
# Add logic to parse CSV with columns: date, salesRep, product, quantity, unitPrice
# Calculate total sales (quantity * unitPrice) for each row
# Group results by salesRep and calculate totals per rep
```

**Step 3 - Add Validation:**
```python
# Add validation to ensure all required columns exist
# Validate that quantity and unitPrice are positive numbers
# Validate that date is in YYYY-MM-DD format
```

**Step 4 - Add Error Handling:**
```python
# Add try-catch blocks for CSV parsing errors
# Handle missing or malformed data gracefully
# Return appropriate HTTP status codes and error messages
```

**Step 5 - Add Response:**
```python
# Return JSON response with:
# - Summary: total sales, total transactions, number of sales reps
# - Details: array of sales rep performance (name, transactions, total sales)
# - Sorted by total sales descending
```

## üöÄ Next Steps

1. Try these prompts in your function_app.py
2. Modify them for your specific use cases
3. Experiment with combining multiple prompts
4. Share successful prompts with your team
5. Build a library of prompts for common tasks

## üìû Getting Help

- Copilot not generating what you need? Try rephrasing the prompt
- Generated code has errors? Ask Copilot to fix: "Fix the error in the above code"
- Want to understand code? Ask: "Explain what this function does"
- Need tests? Ask: "Generate unit tests for this function"

---

**Remember**: Copilot is a tool to accelerate development, but always review and test generated code before deploying to production!